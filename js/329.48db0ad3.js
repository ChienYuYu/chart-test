(self["webpackChunk_2023chart_test"]=self["webpackChunk_2023chart_test"]||[]).push([[329],{2329:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return P}});var r=function(){var t=this,a=t._self._c;return a("div",[a("h4",[t._v("固定寬圖表")]),t.showChart?a("div",{staticClass:"chart-container"},[a("chart",{ref:"child_chart",staticClass:"my-chart",attrs:{CO2Array:t.CO2Array,PM25Array:t.PM25Array,HUMArray:t.HUMArray,TMPArray:t.TMPArray,XAxis:t.XAxis}})],1):t._e(),a("div",{staticStyle:{"margin-top":"30px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.XDataNum,expression:"XDataNum"}],attrs:{type:"number"},domProps:{value:t.XDataNum},on:{input:function(a){a.target.composing||(t.XDataNum=a.target.value)}}}),a("button",{staticStyle:{width:"150px"},attrs:{type:"button"},on:{click:function(a){return t.changeDataNum()}}},[t._v("更新X軸資料筆數")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.CO2DataNum,expression:"CO2DataNum"}],attrs:{type:"number"},domProps:{value:t.CO2DataNum},on:{input:function(a){a.target.composing||(t.CO2DataNum=a.target.value)}}}),a("button",{staticStyle:{width:"150px"},attrs:{type:"button"},on:{click:function(a){return t.changeCO2DataNum()}}},[t._v("更新CO2資料筆數")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.PM25DataNum,expression:"PM25DataNum"}],attrs:{type:"number"},domProps:{value:t.PM25DataNum},on:{input:function(a){a.target.composing||(t.PM25DataNum=a.target.value)}}}),a("button",{staticStyle:{width:"150px"},attrs:{type:"button"},on:{click:function(a){return t.changePM25DataNum()}}},[t._v("更新PM2.5資料筆數")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.HUMDataNum,expression:"HUMDataNum"}],attrs:{type:"number"},domProps:{value:t.HUMDataNum},on:{input:function(a){a.target.composing||(t.HUMDataNum=a.target.value)}}}),a("button",{staticStyle:{width:"150px"},attrs:{type:"button"},on:{click:function(a){return t.changeHUMataNum()}}},[t._v("更新濕度資料筆數")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.TMPDataNum,expression:"TMPDataNum"}],attrs:{type:"number"},domProps:{value:t.TMPDataNum},on:{input:function(a){a.target.composing||(t.TMPDataNum=a.target.value)}}}),a("button",{staticStyle:{width:"150px"},attrs:{type:"button"},on:{click:function(a){return t.changeTMPataNum()}}},[t._v("更新溫度資料筆數")]),a("br")]),a("button",{staticStyle:{"margin-top":"30px"},on:{click:function(a){return t.refresh()}}},[t._v("刷新")]),a("br")])},s=[];const i=[],o=[],n=[],l=[],c=[];function h(t,a){return Math.floor(Math.random()*(a-t+1)+t)}for(let C=0;C<20;C++)i.push(h(400,600));for(let C=0;C<20;C++)o.push(h(30,100));for(let C=0;C<20;C++)n.push(h(30,100));for(let C=0;C<20;C++)l.push(h(20,35));for(let C=1;C<=20;C++)c.push(C);let d=[],u=new Date;for(let C=20;C>=0;C--){let t=new Date(u.getTime()-1e4*C),a=t.getHours(),e=t.getMinutes(),r=t.getSeconds();a=a<10?"0"+a:a,e=e<10?"0"+e:e,r=r<10?"0"+r:r,d.push(`${a}:${e}:${r}`)}console.log(d);var p,m,g=e(6663),x=(e(1243),{extends:g.x1,props:["CO2Array","PM25Array","XAxis","HUMArray","TMPArray"],data:()=>({chartdata:{labels:[],datasets:[{label:"CO2",backgroundColor:"#fa0",borderColor:"#fa0",data:[],fill:!1,yAxisID:"chart_co2",lineTension:0,borderWidth:.5},{label:"PM2.5",backgroundColor:"#af0",borderColor:"#af0",data:[],pointRadius:[],fill:!1,yAxisID:"chart_1",lineTension:0,borderWidth:.5},{label:"HUM",backgroundColor:"#f0a",borderColor:"#f0a",data:[],pointRadius:[],fill:!1,yAxisID:"chart_1",lineTension:0,borderWidth:.5},{label:"TMP",backgroundColor:"#0af",borderColor:"#0af",data:[],pointRadius:[],fill:!1,yAxisID:"chart_1",lineTension:0,borderWidth:.5}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0,easing:"easeOutElastic"},elements:{point:{radius:0}},tooltips:{backgroundColor:"#33333390",titleFontSize:20,bodyFontSize:20},title:{display:!1,text:"標題標題",fontColor:"#fff",fontSize:40,position:"bottom"},legend:{display:!1,position:"top",align:"end",labels:{fontColor:"#333",fontSize:24}},scales:{yAxes:[{id:"chart_1",ticks:{display:!0,fontColor:"#333",fontSize:14,beginAtZero:!0,fixedStepSize:10},gridLines:{display:!0,color:"#ccc"},scaleLabel:{display:!0,labelString:"PM2.5、溫度、濕度",fontColor:"#333",fontSize:12},position:"left"},{id:"chart_co2",ticks:{fontColor:"#fa0",fontSize:"14",beginAtZero:!0,display:!0},gridLines:{display:!1,color:"#aaaaaa80"},scaleLabel:{display:!0,labelString:"CO2",fontColor:"#fa0",fontSize:12},position:"right"}],xAxes:[{ticks:{fontColor:"#333",fontSize:18,maxTicksLimit:24,fontSize:14,maxRotation:0,minRotation:0},gridLines:{display:!1,color:"#333"},scaleLabel:{display:!1,labelString:"時間",fontColor:"#333",fontSize:20}}]},tooltips:{mode:"interpolate",intersect:!1,backgroundColor:"#ff00ff90",caretSize:0,titleFontSize:10,bodyFontSize:14},plugins:{crosshair:{line:{color:"#333",width:.1},sync:{enabled:!1},zoom:{enabled:!1}}}}}),created(){},mounted(){this.getFatherData(),this.renderChart(this.chartdata,this.options)},computed:{},methods:{childFunc(){this.renderChart(this.chartdata,this.options)},setPointRadius(){this.chartdata.datasets[0].pointRadius=this.CO2Array.map(((t,a)=>a==this.chartdata.datasets[0].data.length-1?6:2)),this.chartdata.datasets[1].pointRadius=this.PM25Array.map(((t,a)=>a==this.chartdata.datasets[1].data.length-1?6:2)),this.chartdata.datasets[2].pointRadius=this.HUMArray.map(((t,a)=>a==this.chartdata.datasets[2].data.length-1?6:2)),this.chartdata.datasets[3].pointRadius=this.TMPArray.map(((t,a)=>a==this.chartdata.datasets[3].data.length-1?6:2))},getFatherData(){this.chartdata.datasets[0].data=this.CO2Array,this.chartdata.datasets[1].data=this.PM25Array,this.chartdata.datasets[2].data=this.HUMArray,this.chartdata.datasets[3].data=this.TMPArray,this.chartdata.labels=this.XAxis}}}),f=x,v=e(3736),y=(0,v.Z)(f,p,m,!1,null,"8fc98208",null),b=y.exports,A={components:{chart:b},created(){this.getData()},mounted(){},computed:{XWidth(){return this.XDataNum<=50?"width: 1000px;":`width: ${20*this.XDataNum}px;`}},data(){return{showChart:!0,CO2Array:[],PM25Array:[],HUMArray:[],TMPArray:[],XAxis:[],XDataNum:0,CO2DataNum:0,PM25DataNum:0,HUMDataNum:0,TMPDataNum:0}},methods:{refresh(){this.$refs.child_chart.childFunc()},getData(){this.CO2Array=i,this.PM25Array=o,this.XAxis=d,this.HUMArray=n,this.TMPArray=l},async changeDataNum(){this.XAxis=[];for(let t=1;t<=parseInt(this.XDataNum);t++)await this.XAxis.push(t);this.$refs.child_chart.getFatherData(),this.refresh()},async changeCO2DataNum(){function t(t,a){return Math.floor(Math.random()*(a-t+1)+t)}this.CO2Array=[];for(let a=0;a<parseInt(this.CO2DataNum);a++)await this.CO2Array.push(t(400,600));this.$refs.child_chart.getFatherData(),this.refresh()},async changePM25DataNum(){function t(t,a){return Math.floor(Math.random()*(a-t+1)+t)}this.PM25Array=[];for(let a=0;a<parseInt(this.PM25DataNum);a++)await this.PM25Array.push(t(30,70));this.$refs.child_chart.getFatherData(),this.refresh()},async changeHUMataNum(){function t(t,a){return Math.floor(Math.random()*(a-t+1)+t)}this.HUMArray=[];for(let a=0;a<parseInt(this.HUMDataNum);a++)await this.HUMArray.push(t(30,35));this.$refs.child_chart.getFatherData(),this.refresh()},async changeTMPataNum(){function t(t,a){return Math.floor(Math.random()*(a-t+1)+t)}this.TMPArray=[];for(let a=0;a<parseInt(this.TMPDataNum);a++)await this.TMPArray.push(t(20,30));this.$refs.child_chart.getFatherData(),this.refresh()}}},D=A,M=(0,v.Z)(D,r,s,!1,null,"0c36b1c9",null),P=M.exports},1243:function(t,a,e){
/*!
 * chartjs-plugin-crosshair v1.1.6
 * https://chartjs-plugin-crosshair.netlify.com
 * (c) 2020 Chart.js Contributors
 * Released under the MIT license
 */
(function(t,a){a(e(7757))})(0,(function(t){"use strict";function a(t){t.Interaction.modes.interpolate=function(a,e,r){for(var s=[],i=0;i<a.data.datasets.length;i++)if(a.data.datasets[i].interpolate){var o=a.getDatasetMeta(i);if(!o.hidden){var n=a.scales[o.xAxisID],l=a.scales[o.yAxisID],c=n.getValueForPixel(e.x),h=a.data.datasets[i].data,d=h.findIndex((function(t){return t.x>=c}));if(-1!==d){var u=h[d-1],p=h[d];if(u&&p)var m=(p.y-u.y)/(p.x-u.x),g=u.y+(c-u.x)*m;if(a.data.datasets[i].steppedLine&&u&&(g=u.y),!isNaN(g)){var x=l.getPixelForValue(g);if(!isNaN(x)){var f={value:g,xValue:c,tooltipPosition:function(){return this._model},hasValue:function(){return!0},_model:{x:e.x,y:x},_datasetIndex:i,_index:s.length,_xScale:{getLabelForIndex:function(t){return s[t].xValue}},_yScale:{getLabelForIndex:function(t){return s[t].value}},_chart:a};s.push(f)}}}}}var v=t.Interaction.modes.x(a,e,r);for(d=0;d<v.length;d++){var y=v[d];a.data.datasets[y._datasetIndex].interpolate||s.push(y)}return s}}function e(t){var a=t.helpers,e={line:{color:"#F66",width:1,dashPattern:[]},sync:{enabled:!0,group:1,suppressTooltips:!1},zoom:{enabled:!0,zoomboxBackgroundColor:"rgba(66,133,244,0.2)",zoomboxBorderColor:"#48F",zoomButtonText:"Reset Zoom",zoomButtonClass:"reset-zoom"},snap:{enabled:!1},callbacks:{beforeZoom:function(t,a){return!0},afterZoom:function(t,a){}}},r={id:"crosshair",afterInit:function(t){if(0!=t.config.options.scales.xAxes.length){var a=t.config.options.scales.xAxes[0].type;if("linear"===a||"time"===a||"category"===a||"logarithmic"===xscaleType){void 0===t.options.plugins.crosshair&&(t.options.plugins.crosshair=e),t.crosshair={enabled:!1,x:null,originalData:[],originalXRange:{},dragStarted:!1,dragStartX:null,dragEndX:null,suppressTooltips:!1,reset:function(){this.resetZoom(t,!1,!1)}.bind(this)};var r=this.getOption(t,"sync","enabled");r&&(t.crosshair.syncEventHandler=function(a){this.handleSyncEvent(t,a)}.bind(this),t.crosshair.resetZoomEventHandler=function(a){var e=this.getOption(t,"sync","group");a.chartId!==t.id&&a.syncGroup===e&&this.resetZoom(t,!0)}.bind(this),window.addEventListener("sync-event",t.crosshair.syncEventHandler),window.addEventListener("reset-zoom-event",t.crosshair.resetZoomEventHandler)),t.panZoom=this.panZoom.bind(this,t)}}},destroy:function(t){var a=this.getOption(t,"sync","enabled");a&&(window.removeEventListener("sync-event",t.crosshair.syncEventHandler),window.removeEventListener("reset-zoom-event",t.crosshair.resetZoomEventHandler))},panZoom:function(t,a){if(0!==t.crosshair.originalData.length){var e=t.crosshair.end-t.crosshair.start,r=t.crosshair.min,s=t.crosshair.max;a<0?(t.crosshair.start=Math.max(t.crosshair.start+a,r),t.crosshair.end=t.crosshair.start===r?r+e:t.crosshair.end+a):(t.crosshair.end=Math.min(t.crosshair.end+a,t.crosshair.max),t.crosshair.start=t.crosshair.end===s?s-e:t.crosshair.start+a),this.doZoom(t,t.crosshair.start,t.crosshair.end)}},getOption:function(t,r,s){return a.getValueOrDefault(t.options.plugins.crosshair[r]?t.options.plugins.crosshair[r][s]:void 0,e[r][s])},getXScale:function(t){return t.data.datasets.length?t.scales[t.getDatasetMeta(0).xAxisID]:null},getYScale:function(t){return t.scales[t.getDatasetMeta(0).yAxisID]},handleSyncEvent:function(t,a){var e=this.getOption(t,"sync","group");if(a.chartId!==t.id&&a.syncGroup===e){var r=this.getXScale(t);if(r){var s=void 0===a.original.native.buttons?a.original.native.which:a.original.native.buttons;"mouseup"===a.original.type&&(s=0);var i={type:a.original.type,chart:t,x:r.getPixelForValue(a.xValue),y:a.original.y,native:{buttons:s},stop:!0};t.controller.eventHandler(i)}}},afterEvent:function(t,a){if(0!=t.config.options.scales.xAxes.length){var e=t.config.options.scales.xAxes[0].type;if("linear"===e||"time"===e||"category"===e||"logarithmic"===xscaleType){var r=this.getXScale(t);if(r){var s=void 0===a.native.buttons?a.native.which:a.native.buttons;"mouseup"===a.native.type&&(s=0);var i=this.getOption(t,"sync","enabled"),o=this.getOption(t,"sync","group");if(!a.stop&&i){var n=new CustomEvent("sync-event");n.chartId=t.id,n.syncGroup=o,n.original=a,n.xValue=r.getValueForPixel(a.x),window.dispatchEvent(n)}var l=this.getOption(t,"sync","suppressTooltips");if(t.crosshair.suppressTooltips=a.stop&&l,t.crosshair.enabled="mouseout"!==a.type&&a.x>r.getPixelForValue(r.min)&&a.x<r.getPixelForValue(r.max),!t.crosshair.enabled)return a.x>r.getPixelForValue(r.max)&&t.update(),!0;var c=this.getOption(t,"zoom","enabled");if(1===s&&!t.crosshair.dragStarted&&c&&(t.crosshair.dragStartX=a.x,t.crosshair.dragStarted=!0),t.crosshair.dragStarted&&0===s){t.crosshair.dragStarted=!1;var h=r.getValueForPixel(t.crosshair.dragStartX),d=r.getValueForPixel(t.crosshair.x);Math.abs(t.crosshair.dragStartX-t.crosshair.x)>1&&this.doZoom(t,h,d),t.update()}t.crosshair.x=a.x,t.draw()}}}},afterDraw:function(t){if(t.crosshair.enabled)return t.crosshair.dragStarted?this.drawZoombox(t):(this.drawTraceLine(t),this.interpolateValues(t),this.drawTracePoints(t)),!0},beforeTooltipDraw:function(t){return!t.crosshair.dragStarted&&!t.crosshair.suppressTooltips},resetZoom:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){for(var r=0;r<t.data.datasets.length;r++){var s=t.data.datasets[r];s.data=t.crosshair.originalData.shift(0)}var i="ticks";t.options.scales.xAxes[0].time&&(i="time"),t.crosshair.originalXRange.min?(t.options.scales.xAxes[0][i].min=t.crosshair.originalXRange.min,t.crosshair.originalXRange.min=null):delete t.options.scales.xAxes[0][i].min,t.crosshair.originalXRange.max?(t.options.scales.xAxes[0][i].max=t.crosshair.originalXRange.max,t.crosshair.originalXRange.max=null):delete t.options.scales.xAxes[0][i].max}t.crosshair.button&&t.crosshair.button.parentNode&&(t.crosshair.button.parentNode.removeChild(t.crosshair.button),t.crosshair.button=!1);var o=this.getOption(t,"sync","enabled");if(!a&&e&&o){var n=this.getOption(t,"sync","group"),l=new CustomEvent("reset-zoom-event");l.chartId=t.id,l.syncGroup=n,window.dispatchEvent(l)}if(e){var c=t.options.animation;t.options.animation=!1,t.update(),t.options.animation=c}},doZoom:function(t,r,s){if(r>s){var i=r;r=s,s=i}var o=a.getValueOrDefault(t.options.plugins.crosshair.callbacks?t.options.plugins.crosshair.callbacks.beforeZoom:void 0,e.callbacks.beforeZoom);if(!o(r,s))return!1;if("time"===t.options.scales.xAxes[0].type?(t.options.scales.xAxes[0].time.min&&0===t.crosshair.originalData.length&&(t.crosshair.originalXRange.min=t.options.scales.xAxes[0].time.min),t.options.scales.xAxes[0].time.max&&0===t.crosshair.originalData.length&&(t.crosshair.originalXRange.max=t.options.scales.xAxes[0].time.max)):(t.options.scales.xAxes[0].ticks.min&&void 0===t.crosshair.originalData.length&&(t.crosshair.originalXRange.min=t.options.scales.xAxes[0].ticks.min),t.options.scales.xAxes[0].ticks.max&&void 0===t.crosshair.originalData.length&&(t.crosshair.originalXRange.max=t.options.scales.xAxes[0].ticks.max)),!t.crosshair.button){var n=document.createElement("button"),l=this.getOption(t,"zoom","zoomButtonText"),c=this.getOption(t,"zoom","zoomButtonClass"),h=document.createTextNode(l);n.appendChild(h),n.className=c,n.addEventListener("click",function(){this.resetZoom(t)}.bind(this)),t.canvas.parentNode.appendChild(n),t.crosshair.button=n}t.options.scales.xAxes[0].time?(t.options.scales.xAxes[0].time.min=r,t.options.scales.xAxes[0].time.max=s):(t.options.scales.xAxes[0].ticks.min=r,t.options.scales.xAxes[0].ticks.max=s);for(var d=0===t.crosshair.originalData.length,u=0;u<t.data.datasets.length;u++){var p=[],m=0,g=!1,x=!1;d&&(t.crosshair.originalData[u]=t.data.datasets[u].data);for(var f=t.crosshair.originalData[u],v=0;v<f.length;v++){var y=f[v],b=this.getXScale(t).getRightValue(y);b>=r&&!g&&m>0&&(p.push(f[m-1]),g=!0),b>=r&&b<=s&&p.push(y),b>s&&!x&&m<f.length&&(p.push(y),x=!0),m+=1}t.data.datasets[u].data=p}if(t.crosshair.start=r,t.crosshair.end=s,d){var A=this.getXScale(t);t.crosshair.min=A.min,t.crosshair.max=A.max}t.update();var D=this.getOption(t,"callbacks","afterZoom");D(r,s)},drawZoombox:function(t){var a=this.getYScale(t),e=this.getOption(t,"zoom","zoomboxBorderColor"),r=this.getOption(t,"zoom","zoomboxBackgroundColor");t.ctx.beginPath(),t.ctx.rect(t.crosshair.dragStartX,a.getPixelForValue(a.max),t.crosshair.x-t.crosshair.dragStartX,a.getPixelForValue(a.min)-a.getPixelForValue(a.max)),t.ctx.lineWidth=1,t.ctx.strokeStyle=e,t.ctx.fillStyle=r,t.ctx.fill(),t.ctx.fillStyle="",t.ctx.stroke(),t.ctx.closePath()},drawTraceLine:function(t){var a=this.getYScale(t),e=this.getOption(t,"line","width"),r=this.getOption(t,"line","color"),s=this.getOption(t,"line","dashPattern"),i=this.getOption(t,"snap","enabled"),o=t.crosshair.x,n=!1===t.config.options.hover.intersect;i&&n&&t.active.length&&(o=t.active[0]._view.x),t.ctx.beginPath(),t.ctx.setLineDash(s),t.ctx.moveTo(o,a.getPixelForValue(a.max)),t.ctx.lineWidth=e,t.ctx.strokeStyle=r,t.ctx.lineTo(o,a.getPixelForValue(a.min)),t.ctx.stroke(),t.ctx.setLineDash([])},drawTracePoints:function(t){for(var a=0;a<t.data.datasets.length;a++){var e=t.data.datasets[a],r=t.getDatasetMeta(a),s=t.scales[r.yAxisID];!r.hidden&&e.interpolate&&(t.ctx.beginPath(),t.ctx.arc(t.crosshair.x,s.getPixelForValue(e.interpolatedValue),3,0,2*Math.PI,!1),t.ctx.fillStyle="white",t.ctx.lineWidth=2,t.ctx.strokeStyle=e.borderColor,t.ctx.fill(),t.ctx.stroke())}},interpolateValues:function(t){for(var a=0;a<t.data.datasets.length;a++){var e=t.data.datasets[a],r=t.getDatasetMeta(a),s=t.scales[r.xAxisID],i=s.getValueForPixel(t.crosshair.x);if(!r.hidden&&e.interpolate){var o=e.data,n=o.findIndex((function(t){return t.x>=i})),l=o[n-1],c=o[n];if(t.data.datasets[a].steppedLine&&l)e.interpolatedValue=l.y;else if(l&&c){var h=(c.y-l.y)/(c.x-l.x);e.interpolatedValue=l.y+(i-l.x)*h}else e.interpolatedValue=NaN}}}};t.plugins.register(r)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t,a(t),e(t)}))}}]);
//# sourceMappingURL=329.48db0ad3.js.map